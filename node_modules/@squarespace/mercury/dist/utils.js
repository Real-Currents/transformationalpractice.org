'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.replaceScript = exports.replaceAttributes = undefined;

var _from = require('babel-runtime/core-js/array/from');

var _from2 = _interopRequireDefault(_from);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Given an element and a new reference element, set the attributes on the old
 * element to match those of the reference element.
 * @param  {HTMLElement} element
 * @param  {HTMLElement} referenceElement
 */
var replaceAttributes = exports.replaceAttributes = function replaceAttributes(element, referenceElement) {
  var elementAttributes = (0, _from2.default)(element.attributes);
  for (var i = 0; i < elementAttributes.length; i++) {
    element.removeAttribute(elementAttributes[i].name);
  }
  for (var _i = 0; _i < referenceElement.attributes.length; _i++) {
    element.setAttribute(referenceElement.attributes[_i].name, referenceElement.attributes[_i].value);
  }
};

/**
 * Given an element and a new reference element, create and insert
 * a new script tag to fire.
 * @param  {HTMLElement} element
 * @param  {HTMLElement} referenceElement
 */
var replaceScript = exports.replaceScript = function replaceScript(element, referenceElement) {
  var parentElement = element.parentElement;
  var newScriptElement = document.createElement('script');
  newScriptElement.innerHTML = referenceElement.innerHTML;
  replaceAttributes(newScriptElement, element);
  parentElement.removeChild(element);
  parentElement.appendChild(newScriptElement);
};